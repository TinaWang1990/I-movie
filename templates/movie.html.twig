<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous">
   
     <link rel="stylesheet" type="text/css" href="/project/js.css">

    <title>{{movie.name}}</title>
  </head>
  <body>
  <div class="H1 container-fluid p-0 ">
     <nav class="navbar navbar-dark bg-dark">
     	<a class="nav-link dropdown-toggle" href="" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
     		 <span class="navbar-toggler-icon"></span>
   		 </button>
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          <a class="dropdown-item" href="/project/">Home</a>
          <a class="dropdown-item" href="#">Movies</a>
          <a class="dropdown-item" href="#">Comments</a>
        </div>
    
    	 <a class="navbar-brand" href="/project/">Movie-SCS</a>
    	 <form class="form-inline">
   		 <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
    		<button class="btn btn-outline-light my-2 my-sm-0" type="submit"> <i class="fas fa-search"></i></button>
 		 </form>
     		<div class="login">
       		 <i class="fas fa-user"></i>
      		</div>
 	 </nav>
   </div>
<!-- 
 	 <div class="B-H1 container-fluid p-0" style=" background-image: url(/project/img/{{movie.bg_url}})">
 	 	
 	 </div> -->
   <div class="B-H1 container-fluid p-0 position-relative" style="height: 60vh">
     <img src="/project/img/{{movie.bg_url}}" style="width: 100%; height: 60vh">
   </div>

 	 <div class="B-H2 container-fluid p-0" style="top:40vh">
 	 	<div class="row m-0 p-0">
 	 		<div class="col-5">
 	 			<div class="card" >
 			 <img class="card-img-top" src="/project/img/{{movie.poster_url}}" alt="Card image cap">
 			 <div class="card-body">
   			 	<h3>Movie Info</h3>
   			 		<div class="director font-weight-light"><span>Director: </span>Steven Spielberg</div>
   			 		<div class="actor font-weight-light"><span>Actors: </span>Tye Sheridan, Opvia Cooke, Ben Mendelsohn</div>
   			 		<div class="date font-weight-light"><span>Release date: </span>March 11, 2018</div>
   			 		<div class="country font-weight-light"><span>Country: </span>United States</div>
   			 		<div class="language font-weight-light"><span>Language: </span>English</div>
    			</div>
				</div>
 	 		</div>
 	 		<div class="col-7">
 	 			<div class="movie-info">
 	 				<h1>{{movie.name}}</h1>
 	 				<span class="tag">{{movie.genre}}</span> | <span class="movie-duration">{{movie.runtime}} mins</span>
 	 				<div class="rating-star">
 	 					<span>Rating:</span>
 	 				</div> 	 		
 	 			</div>
 	 		</div>
 	 	</div>
 	 </div>

 	 <div class="B-H3 container-fluid p-0">
 	 	<div class="row m-0 p-0">
 	 	<div class="col-5"></div>
 	 	<div class="col-7">
 	 		 <div class="movie-story text-dark">
 	 			<h1><i class="fas fa-book"></i>  Movie Story</h1>
 	 			<p class="text-justify font-weight-light" style="font-size: 18px">
        {{ movie.description }}  
        </p>
 	 		</div>
 	 		<div class="trailor text-dark">
 	 			<h1><i class="fas fa-camera-retro"></i>  Trailers & Videos</h1>
 	 			<div style="box-shadow: 3px 3px 5px 6px #000;"><iframe width="100%" height="400" src="{{movie.YouTuB_url}}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>
 	 		</div>
 	 	</div>
 	 	</div>
 	 </div>
 	 <div class="B-H4 container-fluid px-5 pt-5">
 	 	<div class="row" style="border-bottom: 1px solid #bbb;">
 	 		<div class="col-3" style="font-size:20px; border-bottom: 2px solid #fe7900;color: #fe7900;line-height: 2rem; justify-content: center;">
 	 			<span><i class="fas fa-comments"></i></span>  COMMENT
 	 		</div>
 	 	</div>
 	 	<div class="row">
 	 		 <div class="form-inline my-5 mx-auto">
   				<textarea class="form-control" id="comment_input" type="text-area" rows="4" placeholder="Write Your Comments Here" style="width:50vw"></textarea>
   				<div class="ml-3" style="align-self: flex-end; ">
   					<button class="btn " id="comment_submit" style="background-color:#fe7900 " data-id="{{movie.id}}">Submit</button>
   				</div>
    		</div >
 	 	</div>
    <div class="row p-0" >
     <div class="col-4"></div>
     <div id="result-info"></div>
   </div>
 	 </div>
   
 	 
 	 <div class="B-H5 container-fluid" id="all-comments">
    {% if comments == false %}
      <div class="row">
        <div class="col-1 text-warning text-center">
          </div>
        <div class="col-11 text-dark">
          <p class="text-justify font-weight-light">
            No Comment for this movie yet.
          </p>
        </div>
      </div>
     {% else %}
      {% for comment in comments %}
        <div class="row">
        <div class="col-1 text-warning text-center">
          <div class="mx-3">
          <i class="fas fa-user fa-2x"></i>
          </div>
        </div>
        <div class="col-11 text-dark">
          <h5>Name</h5>
          <h6> {{ comment.date}}</h6>
          <p class="text-justify font-weight-light">
            {{ comment.content}}
          </p>
        </div>
      </div>
      {% endfor %}
    {% endif %}
 	 			
 	 	</div>
 	 

 	 	
 	 	
 	 
    

  <div class="H10 container-fluid p-0">
      <p style="margin: 0"><i class="fas fa-copyright">copyright 2018 Moive SCS</i></p>
  </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

    <script type="text/javascript">
      $('#comment_submit').on('click', function(){
        var m_id=$(this).data('id');
        var content=$('#comment_input').val();
        $.post(
          '/project/comment/submit',
            {
              "mid":m_id,
              "content":content 
            },
            function(data){
              
              if(data.code==200){
                $('#result-info').html(
                  '<div class="alert alert-success" role="alert">'+data.message+'</div>'
                  );
                $('#all-comments').prepend(
                  `<div class="row">
                    <div class="col-1 text-warning text-center">
                      <div class="mx-3">
                      <i class="fas fa-user fa-2x"></i>
                      </div>
                    </div>
                    <div class="col-11 text-dark">
                      <h5>Name</h5>
                      <h6> {{comment.date}}</h6>
                      <p class="text-justify font-weight-light">`+content+`
                      </p>
                    </div>
                  </div>`
                  );
              }else{
                $('#result-info').html(
                  '<div class="alert alert-warning" role="alert">'+data.message+'</div>'
                  );
              }
            },
            "json"
          );
            
      });
    </script>
  </body>
</html>